{"version":3,"sources":["webpack:///./src/components/allocpermission.vue?2d83","webpack:///./src/components/permission.vue?8dd9","webpack:///src/components/permission.vue","webpack:///./src/components/permission.vue?9823","webpack:///./src/components/permission.vue","webpack:///src/components/allocpermission.vue","webpack:///./src/components/allocpermission.vue?7fd4","webpack:///./src/components/allocpermission.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","tableData","filter","data","search","contract_name","toLowerCase","includes","scopedSlots","_u","key","fn","scope","model","value","callback","$$v","expression","on","$event","handleEdit","$index","row","_v","dialog2Visible","closeDlg","staticClass","permissionData1","permissionValue","sendData","staticRenderFns","handleChange","commitValue","watchValue","SignValue","component","name","computed","permission","url","method","types","token","process","transformRequest","ret","encodeURIComponent","it","headers","res","operators","forEach","push","index","user_name","item","id","pData","label","generateData","generatePermission","dialogVisible","dialog3Visible","dialog4Visible","msg","resData","signValue","counterData","signData","approveData","methods","$axios","$url","$store","state","con_id","permissions","$notify","counters","approves","signs","console","log","perData","permissionData","generatePermissionData","changeCommit","direction","type","list","movedKeys","changeWatch","changeSign"],"mappings":"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","file":"js/chunk-2d0ac3bf.59a37a49.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData.filter(function (data) { return !_vm.search ||\n                data.contract_name.toLowerCase().includes(_vm.search.toLowerCase()); })}},[_c('el-table-column',{attrs:{\"label\":\"序号\",\"prop\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"用户名称\",\"prop\":\"user_name\"}}),_c('el-table-column',{attrs:{\"align\":\"right\"},scopedSlots:_vm._u([{key:\"header\",fn:function(\n/* eslint-disable vue/no-unused-vars */\nscope){return [_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"输入关键字搜索\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})]}},{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"分配权限 \")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"分配用户权限\",\"visible\":_vm.dialog2Visible,\"append-to-body\":\"\"},on:{\"close\":_vm.closeDlg,\"update:visible\":function($event){_vm.dialog2Visible=$event}}},[_c('el-container',{attrs:{\"direction\":\"vertical\"}},[_c('el-container',[_c('el-main',[_c('el-transfer',{staticClass:\"main-transfer\",attrs:{\"filterable\":\"\",\"filter-placeholder\":\"请输入用户名\",\"data\":_vm.permissionData1,\"titles\":['权限列表', '授予权限']},model:{value:(_vm.permissionValue),callback:function ($$v) {_vm.permissionValue=$$v},expression:\"permissionValue\"}})],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":15}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendData}},[_vm._v(\"确定\")])],1),_c('el-col',{attrs:{\"span\":9}},[_c('el-button',{on:{\"click\":_vm.closeDlg}},[_vm._v(\"取消\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{attrs:{\"direction\":\"vertical\"}},[_c('el-container',[_c('el-header',[_vm._v(\"分配会签人\")]),_c('el-main',[_c('el-transfer',{staticClass:\"main-transfer\",attrs:{\"filterable\":\"\",\"filter-placeholder\":\"请输入用户名\",\"data\":_vm.data,\"titles\":['待分配人员', '已分配人员列表']},on:{\"change\":_vm.handleChange},model:{value:(_vm.commitValue),callback:function ($$v) {_vm.commitValue=$$v},expression:\"commitValue\"}})],1)],1),_c('el-container',[_c('el-header',[_vm._v(\"分配审批人\")]),_c('el-main',[_c('el-transfer',{staticClass:\"main-transfer\",attrs:{\"filterable\":\"\",\"filter-placeholder\":\"请输入用户名\",\"data\":_vm.data,\"titles\":['待分配人员', '已分配人员列表']},on:{\"change\":_vm.handleChange},model:{value:(_vm.watchValue),callback:function ($$v) {_vm.watchValue=$$v},expression:\"watchValue\"}})],1)],1),_c('el-container',[_c('el-header',[_vm._v(\"分配签订人\")]),_c('el-main',[_c('el-transfer',{staticClass:\"main-transfer\",attrs:{\"filterable\":\"\",\"filter-placeholder\":\"请输入用户名\",\"data\":_vm.data,\"titles\":['待分配人员', '已分配人员列表']},on:{\"change\":_vm.handleChange},model:{value:(_vm.SignValue),callback:function ($$v) {_vm.SignValue=$$v},expression:\"SignValue\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\r\n    <el-container direction=\"vertical\">\r\n        <el-container >\r\n            <el-header>分配会签人</el-header>\r\n            <el-main>\r\n                <el-transfer\r\n                        filterable\r\n                        filter-placeholder=\"请输入用户名\"\r\n                        v-model=\"commitValue\"\r\n                        :data=\"data\"\r\n                        :titles=\"['待分配人员', '已分配人员列表']\"\r\n                        class=\"main-transfer\"\r\n                        @change=\"handleChange\">\r\n\r\n                </el-transfer>\r\n            </el-main>\r\n        </el-container>\r\n\r\n        <el-container >\r\n            <el-header>分配审批人</el-header>\r\n            <el-main>\r\n                <el-transfer\r\n                        filterable\r\n                        filter-placeholder=\"请输入用户名\"\r\n                        v-model=\"watchValue\"\r\n                        :data=\"data\"\r\n                        :titles=\"['待分配人员', '已分配人员列表']\"\r\n                        class=\"main-transfer\"\r\n                        @change=\"handleChange\">\r\n\r\n                </el-transfer>\r\n            </el-main>\r\n        </el-container>\r\n\r\n        <el-container >\r\n            <el-header>分配签订人</el-header>\r\n            <el-main>\r\n                <el-transfer\r\n                        filterable\r\n                        filter-placeholder=\"请输入用户名\"\r\n                        v-model=\"SignValue\"\r\n                        :data=\"data\"\r\n                        :titles=\"['待分配人员', '已分配人员列表']\"\r\n                        class=\"main-transfer\"\r\n                        @change=\"handleChange\">\r\n\r\n                </el-transfer>\r\n            </el-main>\r\n        </el-container>\r\n    </el-container>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"permission\",\r\n        data() {\r\n            const generateData = () => {\r\n                this.$axios({\r\n                    url: this.$url + \"/contract/selectUserPermission\",\r\n                    method: 'post',\r\n                    data: {\r\n                        token: this.$store.state.token,\r\n                        con_id: 1\r\n                    },\r\n                    transformRequest: [function (data) {\r\n                        let ret = '';\r\n                        for (let it in data) {\r\n                            ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n                        }\r\n                        return ret\r\n                    }],\r\n                    headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n                }).than(res => {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(res)\r\n                })\r\n\r\n            };\r\n\r\n\r\n            return {\r\n                resData: [],\r\n                commitValue: [],\r\n                watchValue: [],\r\n                signValue: [],\r\n                data: generateData(),\r\n            }\r\n        },\r\n        methods: {}\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./permission.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./permission.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./permission.vue?vue&type=template&id=02747dda&scoped=true&\"\nimport script from \"./permission.vue?vue&type=script&lang=js&\"\nexport * from \"./permission.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"02747dda\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <el-table\r\n        :data=\"tableData.filter(data => !search ||\r\n                data.contract_name.toLowerCase().includes(search.toLowerCase()))\"\r\n        style=\"width: 100%\">\r\n      <el-table-column\r\n          label=\"序号\"\r\n          prop=\"index\">\r\n      </el-table-column>\r\n\r\n      <el-table-column\r\n          label=\"用户名称\"\r\n          prop=\"user_name\">\r\n      </el-table-column>\r\n      <el-table-column\r\n          align=\"right\">\r\n        <template slot=\"header\" slot-scope=\"\r\n/* eslint-disable vue/no-unused-vars */\r\nscope\">\r\n          <el-input\r\n              v-model=\"search\"\r\n              size=\"mini\"\r\n              placeholder=\"输入关键字搜索\"/>\r\n        </template>\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n              size=\"mini\"\r\n              @click=\"handleEdit(scope.$index, scope.row)\">分配权限\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog @close=\"closeDlg\" title=\"分配用户权限\" :visible.sync=\"dialog2Visible\" append-to-body>\r\n      <el-container direction=\"vertical\">\r\n        <el-container>\r\n          <el-main>\r\n            <el-transfer\r\n                filterable\r\n                filter-placeholder=\"请输入用户名\"\r\n                v-model=\"permissionValue\"\r\n                :data=\"permissionData1\"\r\n                :titles=\"['权限列表', '授予权限']\"\r\n                class=\"main-transfer\">\r\n            </el-transfer>\r\n          </el-main>\r\n        </el-container>\r\n        <el-row>\r\n          <el-col :span=\"15\">\r\n            <el-button type=\"primary\" @click=\"sendData\">确定</el-button>\r\n          </el-col>\r\n\r\n          <el-col :span=\"9\">\r\n            <el-button @click=\"closeDlg\">取消</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-container>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport permission from \"@/components/permission.vue\";\r\n\r\nexport default {\r\n  name: \"allocContract\",\r\n  computed: {\r\n    permission() {\r\n      return permission\r\n    }\r\n  },\r\n\r\n  data() {\r\n    const generateData = () => {\r\n\r\n      const data = [];\r\n\r\n      this.$axios({\r\n        url: this.$url + \"/manager/operators\",/*ByProcess*/\r\n        method: 'post',\r\n        data: {\r\n          types : 0,\r\n          token: this.$store.state.token,\r\n          process: 1\r\n        },\r\n        transformRequest: [function (data) {\r\n          let ret = '';\r\n          for (let it in data) {\r\n            ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n          }\r\n          return ret\r\n        }],\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n      }).then(res => {\r\n        res.data.operators.forEach((item, index) => {\r\n          data.push({\r\n            index: index + 1,\r\n            //date: item.beginTime,\r\n            user_name: item.name,\r\n            id: item.id\r\n          })\r\n        })\r\n      })\r\n      return data;\r\n    };\r\n\r\n    const generatePermission = () =>{\r\n      const pData = [];\r\n      pData.push({\r\n        label: '定稿及起草权限',\r\n        key: 3,\r\n      })\r\n      pData.push({\r\n        label: '会签权限',\r\n        key: 4,\r\n      })\r\n      pData.push({\r\n        label: '签订权限',\r\n        key: 5,\r\n      })\r\n      pData.push({\r\n        label: '审批权限',\r\n        key: 6,\r\n      })\r\n      //window.console.log(\"pData:\"+pData[0].label+pData[0].key);\r\n      return pData;\r\n    }\r\n\r\n    return {\r\n      search: '',\r\n      tableData: generateData(),\r\n      permissionData1: generatePermission(),\r\n      dialogVisible: false,\r\n      dialog2Visible: false,\r\n      dialog3Visible: false,\r\n      dialog4Visible: false,\r\n      msg: '',\r\n      index: -1,\r\n      row: -1,\r\n      permissionValue: [],\r\n      resData: [],\r\n      commitValue: [],\r\n      watchValue: [],\r\n      signValue: [],\r\n      counterData: [],\r\n      signData: [],\r\n      approveData: [],\r\n\r\n    }\r\n  },\r\n\r\n\r\n  methods: {\r\n    sendData(){\r\n      this.$axios({\r\n        url: this.$url + \"/manager/contribute\",\r\n        method: 'post',\r\n        data: {\r\n          types : 1,\r\n          token: this.$store.state.token,\r\n          con_id: this.row.id,\r\n          permissions: this.permissionValue,\r\n          user_name: this.row.user_name\r\n        },\r\n        transformRequest: [function (data) {\r\n          let ret = '';\r\n          for (let it in data) {\r\n            ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n          }\r\n          return ret\r\n        }],\r\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n      });\r\n      this.dialog2Visible = false;\r\n      //this.permissionData1 = [];\r\n      this.permissionValue = [];\r\n      //this.permissionData1 = generatePermission();\r\n      this.$notify({\r\n          title: '成功',\r\n          message: '分配权限成功！',\r\n          type: \"success\"\r\n      })\r\n    },\r\n\r\n    closeDlg() {\r\n      //this.permissionData = [];\r\n      this.commitValue = [];\r\n      this.watchValue = [];\r\n      this.signValue = [];\r\n      //this.permissionData1 = [];\r\n      this.permissionValue = [];\r\n      //this.permissionData1 = generatePermission();\r\n      this.dialog2Visible = false;\r\n      // eslint-disable-next-line no-console\r\n      //console.log(this.permissionData);\r\n    },\r\n\r\n    handleEdit(index, row) {\r\n      this.index = index;\r\n      this.row = row;\r\n\r\n      this.dialog2Visible = true;\r\n\r\n      const generatePermissionData = () => {\r\n        const perData = [];\r\n        const signData = [];\r\n        const approveData = [];\r\n        const counterData = [];\r\n        this.$axios({\r\n          url: this.$url + \"/manager/display/distribute\",\r\n          method: 'post',\r\n          data: {\r\n            types : 0,\r\n            token: this.$store.state.token,\r\n            con_id: this.row.id\r\n          },\r\n          transformRequest: [function (data) {\r\n            let ret = '';\r\n            for (let it in data) {\r\n              ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n            }\r\n            return ret\r\n          }],\r\n          headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n        }).then(res => {\r\n\r\n          // eslint-disable-next-line no-unused-vars\r\n          // res.data.users.forEach((item) => {\r\n          //     perData.push({\r\n          //         label: item.name,\r\n          //         key: item.id,\r\n          //     });\r\n          res.data.counters.forEach((item) => {\r\n            counterData.push({\r\n              label: item.name,\r\n              key: item.id,\r\n            })\r\n          })\r\n          res.data.approves.forEach((item) => {\r\n            approveData.push({\r\n              label: item.name,\r\n              key: item.id,\r\n            })\r\n          })\r\n          res.data.signs.forEach((item) => {\r\n            signData.push({\r\n              label: item.name,\r\n              key: item.id,\r\n            })\r\n          })\r\n          //  if (item.permissions === 1 ||\r\n          //     item.permissions === 3 ||\r\n          //     item.permissions === 5 ||\r\n          //     item.permissions === 7) {\r\n          //     this.commitValue.push(item.id)\r\n          // }\r\n\r\n          // if (item.permissions === 2 ||\r\n          //     item.permissions === 3 ||\r\n          //     item.permissions === 6 ||\r\n          //     item.permissions === 7) {\r\n          //     this.watchValue.push(item.id)\r\n          // }\r\n\r\n          // if (item.permissions === 4 ||\r\n          //     item.permissions === 5 ||\r\n          //     item.permissions === 6 ||\r\n          //     item.permissions === 7) {\r\n          //     this.signValue.push(item.id)\r\n          // }\r\n          //});\r\n        });\r\n        // eslint-disable-next-line no-console\r\n        console.log(\"0\",signData);\r\n        // eslint-disable-next-line no-console\r\n        console.log(\"1\",counterData);\r\n        // eslint-disable-next-line no-console\r\n        console.log(\"2\",approveData);\r\n        this.signData = signData;\r\n        this.approveData = approveData;\r\n        this.counterData = counterData;\r\n        return perData;\r\n      };\r\n      this.permissionData = generatePermissionData();\r\n    },\r\n\r\n    changeCommit(value, direction, movedKeys) {\r\n      if (direction === \"right\") {\r\n        this.$axios({\r\n          url: this.$url + \"/contract/updatePermission\",\r\n          method: 'post',\r\n          data: {\r\n            token: this.$store.state.token,\r\n            con_id: this.row.id,\r\n            type: 1,\r\n            list: movedKeys\r\n          },\r\n          transformRequest: [function (data) {\r\n            let ret = '';\r\n            for (let it in data) {\r\n              ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n            }\r\n            return ret\r\n          }],\r\n          headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n        })\r\n      }\r\n      if (direction === \"left\") {\r\n        this.$axios({\r\n          url: this.$url + \"/contract/updatePermission\",\r\n          method: 'post',\r\n          data: {\r\n            token: this.$store.state.token,\r\n            con_id: this.row.id,\r\n            type: -1,\r\n            list: movedKeys\r\n          },\r\n          transformRequest: [function (data) {\r\n            let ret = '';\r\n            for (let it in data) {\r\n              ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n            }\r\n            return ret\r\n          }],\r\n          headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n        })\r\n      }\r\n    },\r\n\r\n    changeWatch(value, direction, movedKeys) {\r\n      if (direction === \"right\") {\r\n        this.$axios({\r\n          url: this.$url + \"/contract/updatePermission\",\r\n          method: 'post',\r\n          data: {\r\n            token: this.$store.state.token,\r\n            con_id: this.row.id,\r\n            type: 2,\r\n            list: movedKeys\r\n          },\r\n          transformRequest: [function (data) {\r\n            let ret = '';\r\n            for (let it in data) {\r\n              ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n            }\r\n            return ret\r\n          }],\r\n          headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n        })\r\n      }\r\n      if (direction === \"left\") {\r\n        this.$axios({\r\n          url: this.$url + \"/contract/updatePermission\",\r\n          method: 'post',\r\n          data: {\r\n            token: this.$store.state.token,\r\n            con_id: this.row.id,\r\n            type: -2,\r\n            list: movedKeys\r\n          },\r\n          transformRequest: [function (data) {\r\n            let ret = '';\r\n            for (let it in data) {\r\n              ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n            }\r\n            return ret\r\n          }],\r\n          headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n        })\r\n      }\r\n    },\r\n\r\n    changeSign(value, direction, movedKeys) {\r\n      if (direction === \"right\") {\r\n        this.$axios({\r\n          url: this.$url + \"/contract/updatePermission\",\r\n          method: 'post',\r\n          data: {\r\n            token: this.$store.state.token,\r\n            con_id: this.row.id,\r\n            type: 4,\r\n            list: movedKeys\r\n          },\r\n          transformRequest: [function (data) {\r\n            let ret = '';\r\n            for (let it in data) {\r\n              ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n            }\r\n            return ret\r\n          }],\r\n          headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n        })\r\n      }\r\n      if (direction === \"left\") {\r\n        this.$axios({\r\n          url: this.$url + \"/contract/updatePermission\",\r\n          method: 'post',\r\n          data: {\r\n            token: this.$store.state.token,\r\n            con_id: this.row.id,\r\n            type: -4,\r\n            list: movedKeys\r\n          },\r\n          transformRequest: [function (data) {\r\n            let ret = '';\r\n            for (let it in data) {\r\n              ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n            }\r\n            return ret\r\n          }],\r\n          headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./allocpermission.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./allocpermission.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./allocpermission.vue?vue&type=template&id=0db56986&scoped=true&\"\nimport script from \"./allocpermission.vue?vue&type=script&lang=js&\"\nexport * from \"./allocpermission.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0db56986\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}