(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac3bf"],{1956:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter((function(t){return!e.search||t.contract_name.toLowerCase().includes(e.search.toLowerCase())}))}},[n("el-table-column",{attrs:{label:"序号",prop:"index"}}),n("el-table-column",{attrs:{label:"用户名称",prop:"user_name"}}),n("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("分配权限 ")])]}}])})],1),n("el-dialog",{attrs:{title:"分配用户权限",visible:e.dialog2Visible,"append-to-body":""},on:{close:e.closeDlg,"update:visible":function(t){e.dialog2Visible=t}}},[n("el-container",{attrs:{direction:"vertical"}},[n("el-container",[n("el-main",[n("el-transfer",{staticClass:"main-transfer",attrs:{filterable:"","filter-placeholder":"请输入用户名",data:e.permissionData1,titles:["权限列表","授予权限"]},model:{value:e.permissionValue,callback:function(t){e.permissionValue=t},expression:"permissionValue"}})],1)],1),n("el-row",[n("el-col",{attrs:{span:15}},[n("el-button",{attrs:{type:"primary"},on:{click:e.sendData}},[e._v("确定")])],1),n("el-col",{attrs:{span:9}},[n("el-button",{on:{click:e.closeDlg}},[e._v("取消")])],1)],1)],1)],1)],1)},o=[],i=(n("b0c0"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{attrs:{direction:"vertical"}},[n("el-container",[n("el-header",[e._v("分配会签人")]),n("el-main",[n("el-transfer",{staticClass:"main-transfer",attrs:{filterable:"","filter-placeholder":"请输入用户名",data:e.data,titles:["待分配人员","已分配人员列表"]},on:{change:e.handleChange},model:{value:e.commitValue,callback:function(t){e.commitValue=t},expression:"commitValue"}})],1)],1),n("el-container",[n("el-header",[e._v("分配审批人")]),n("el-main",[n("el-transfer",{staticClass:"main-transfer",attrs:{filterable:"","filter-placeholder":"请输入用户名",data:e.data,titles:["待分配人员","已分配人员列表"]},on:{change:e.handleChange},model:{value:e.watchValue,callback:function(t){e.watchValue=t},expression:"watchValue"}})],1)],1),n("el-container",[n("el-header",[e._v("分配签订人")]),n("el-main",[n("el-transfer",{staticClass:"main-transfer",attrs:{filterable:"","filter-placeholder":"请输入用户名",data:e.data,titles:["待分配人员","已分配人员列表"]},on:{change:e.handleChange},model:{value:e.SignValue,callback:function(t){e.SignValue=t},expression:"SignValue"}})],1)],1)],1)}),r=[],s={name:"permission",data:function(){var e=this,t=function(){e.$axios({url:e.$url+"/contract/selectUserPermission",method:"post",data:{token:e.$store.state.token,con_id:1},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).than((function(e){console.log(e)}))};return{resData:[],commitValue:[],watchValue:[],signValue:[],data:t()}},methods:{}},l=s,c=n("2877"),u=Object(c["a"])(l,i,r,!1,null,"02747dda",null),d=u.exports,p={name:"allocContract",computed:{permission:function(){return d}},data:function(){var e=this,t=function(){var t=[];return e.$axios({url:e.$url+"/manager/operators",method:"post",data:{types:0,token:e.$store.state.token,process:1},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){e.data.operators.forEach((function(e,n){t.push({index:n+1,user_name:e.name,id:e.id})}))})),t},n=function(){var e=[];return e.push({label:"定稿及起草权限",key:3}),e.push({label:"会签权限",key:4}),e.push({label:"签订权限",key:5}),e.push({label:"审批权限",key:6}),e};return{search:"",tableData:t(),permissionData1:n(),dialogVisible:!1,dialog2Visible:!1,dialog3Visible:!1,dialog4Visible:!1,msg:"",index:-1,row:-1,permissionValue:[],resData:[],commitValue:[],watchValue:[],signValue:[],counterData:[],signData:[],approveData:[]}},methods:{sendData:function(){this.$axios({url:this.$url+"/manager/contribute",method:"post",data:{types:1,token:this.$store.state.token,con_id:this.row.id,permissions:this.permissionValue,user_name:this.row.user_name},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}),this.dialog2Visible=!1,this.permissionValue=[],this.$notify({title:"成功",message:"分配权限成功！",type:"success"})},closeDlg:function(){this.commitValue=[],this.watchValue=[],this.signValue=[],this.permissionValue=[],this.dialog2Visible=!1},handleEdit:function(e,t){var n=this;this.index=e,this.row=t,this.dialog2Visible=!0;var a=function(){var e=[],t=[],a=[],o=[];return n.$axios({url:n.$url+"/manager/display/distribute",method:"post",data:{types:0,token:n.$store.state.token,con_id:n.row.id},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){e.data.counters.forEach((function(e){o.push({label:e.name,key:e.id})})),e.data.approves.forEach((function(e){a.push({label:e.name,key:e.id})})),e.data.signs.forEach((function(e){t.push({label:e.name,key:e.id})}))})),console.log("0",t),console.log("1",o),console.log("2",a),n.signData=t,n.approveData=a,n.counterData=o,e};this.permissionData=a()},changeCommit:function(e,t,n){"right"===t&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:1,list:n},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}),"left"===t&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:-1,list:n},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},changeWatch:function(e,t,n){"right"===t&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:2,list:n},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}),"left"===t&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:-2,list:n},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},changeSign:function(e,t,n){"right"===t&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:4,list:n},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}),"left"===t&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:-4,list:n},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}},h=p,m=Object(c["a"])(h,a,o,!1,null,"0db56986",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0ac3bf.59a37a49.js.map