(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3590052c","chunk-7abcf57c"],{"0940":function(t,e,a){},"2d01":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.filter((function(e){return!t.search||e.contract_name.toLowerCase().includes(t.search.toLowerCase())}))}},[a("el-table-column",{attrs:{label:"序号",prop:"index"}}),a("el-table-column",{attrs:{label:"合同名称",prop:"contract_name"}}),a("el-table-column",{attrs:{label:"起草时间",prop:"date"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleWatch(e.$index,e.row)}}},[t._v("查看 ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("定稿 ")])]}}])})],1),a("el-dialog",{attrs:{title:"修改合同",visible:t.dialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("edit-contract")],1),a("el-dialog",{attrs:{title:"定稿意见",visible:t.dialog2Visible,"append-to-body":""},on:{"update:visible":function(e){t.dialog2Visible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"修改内容:"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialog2Visible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.postMsg()}}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"查看合同",visible:t.dialog3Visible,"append-to-body":""},on:{"update:visible":function(e){t.dialog3Visible=e}}},[a("el-form",{ref:"draftForm",attrs:{model:t.draftForm,rules:t.rule,"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:"合同名称:",prop:"name"}},[a("el-input",{model:{value:t.draftForm.name,callback:function(e){t.$set(t.draftForm,"name",e)},expression:"draftForm.name"}})],1),a("el-form-item",{attrs:{label:"客户:",prop:"userName"}},[a("el-input",{model:{value:t.draftForm.customer,callback:function(e){t.$set(t.draftForm,"customer",e)},expression:"draftForm.customer"}})],1),a("el-form-item",{attrs:{label:"活动时间",prop:"date"}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:t.draftForm.start_time,callback:function(e){t.$set(t.draftForm,"start_time",e)},expression:"draftForm.start_time"}})],1),a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:t.draftForm.end_time,callback:function(e){t.$set(t.draftForm,"end_time",e)},expression:"draftForm.end_time"}})],1)],1),a("el-form-item",{attrs:{label:"合同内容",prop:"info"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6}},model:{value:t.draftForm.info,callback:function(e){t.$set(t.draftForm,"info",e)},expression:"draftForm.info"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialog3Visible=!1}}},[t._v("确 定")])],1)],1)],1)},r=[],n=(a("a434"),a("b0c0"),a("159b"),a("5afe")),i={name:"UnCommittedContract",components:{EditContract:n["default"]},data:function(){var t=this,e=function(){var e=[];return t.$axios({url:t.$url+"/operator/finalize",method:"post",data:{types:0,matter:1,user_name:t.$store.state.userName,token:t.$store.state.token,type:"uncommitted"},transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){t.data.finalizations.forEach((function(t,a){e.push({index:a+1,contract_name:t,id:t.id})}))})),e};return{search:"",tableData:e(),dialogVisible:!1,dialog2Visible:!1,dialog3Visible:!1,msg:"",index:-1,row:-1,draftForm:{start_time:"2003-5-9",end_time:"2099-5-7",name:"",userName:"",date:"",info:""}}},methods:{handleEdit:function(t,e){this.dialog2Visible=!0,this.index=t,this.row=e,console.log(t,e)},handleWatch:function(t,e){var a=this;this.index=t,this.row=e,this.$axios({url:this.$url+"/Check",method:"post",data:{contract_name:this.row.contract_name,matter:1,user_name:this.$store.userName,token:this.$store.state.token,id:this.row.id},transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){a.handleData(t)})),this.dialog3Visible=!0},handleData:function(t){if(-1===t.data.state&&(this.$notify({title:"失败",message:"获取失败！",type:"error"}),this.dialog3Visible=!1),0===t.data.state){this.draftForm.name=this.row.contract_name,this.draftForm.userName=t.data.customer,this.draftForm.customer=t.data.customer,this.draftForm.start_time=t.data.start_time,this.draftForm.end_time=t.data.end_time;var e=[];e[0]=t.data.beginTime,e[1]=t.data.endTime,this.draftForm.date=e,this.draftForm.info=t.data.content}this.dialogVisible=!1},postMsg:function(){var t=this;this.$axios({url:this.$url+"/operator/finalize/fill",method:"post",data:{types:1,user_name:this.$store.state.userName,contract_name:this.row.contract_name,content:this.msg,token:this.$store.state.token,id:this.row.id,msg:this.msg},transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){-1===e.data.state&&t.$notify({title:"失败",message:"定稿失败！",type:"error"}),0===e.data.state&&(t.tableData.splice(t.index,t.row.index),t.$notify({title:"成功",message:"定稿成功！",type:"success"})),t.msg="",t.dialog2Visible=!1}))},handleDelete:function(t,e){console.log(t,e)},comment:function(){var t=this;this.$prompt("定稿意见","提示",{confirmButtonText:"确定11",cancelButtonText:"取消"}).then((function(e){var a=e.value;t.$message({type:"success",message:"提交成功！定稿意见为："+a})})).catch((function(){t.$message({type:"info",message:"取消输入"})}))}}},s=i,l=a("2877"),m=Object(l["a"])(s,o,r,!1,null,null,null);e["default"]=m.exports},"5afe":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"draftForm",attrs:{model:t.draftForm,rules:"rule","label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"合同名称:",prop:"name"}},[a("el-input",{model:{value:t.draftForm.name,callback:function(e){t.$set(t.draftForm,"name",e)},expression:"draftForm.name"}})],1),a("el-form-item",{attrs:{label:"客户:",prop:"userName"}},[a("el-input",{model:{value:t.draftForm.userName,callback:function(e){t.$set(t.draftForm,"userName",e)},expression:"draftForm.userName"}})],1),a("el-form-item",{attrs:{label:"活动时间",prop:"date"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.draftForm.data,callback:function(e){t.$set(t.draftForm,"data",e)},expression:"draftForm.data"}})],1),a("el-form-item",{attrs:{label:"合同内容",prop:"info"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6}},model:{value:t.draftForm.info,callback:function(e){t.$set(t.draftForm,"info",e)},expression:"draftForm.info"}})],1),a("el-form-item",{attrs:{label:"修改意见",prop:"commit_comment"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6}},model:{value:t.draftForm.info,callback:function(e){t.$set(t.draftForm,"info",e)},expression:"draftForm.info"}})],1),a("el-form-item",[a("el-row",[a("el-col",{attrs:{span:15}},[a("el-button",{attrs:{type:"primary"},on:{click:t.postContract}},[t._v("确定")])],1),a("el-col",{attrs:{span:9}},[a("el-button",{attrs:{type:"danger"},on:{click:t.resetContract}},[t._v("重置")])],1)],1)],1)],1)],1)},r=[],n=(a("b0c0"),{name:"EditContract",data:function(){return{draftForm:{name:"",userName:"",data:"",info:""},nullContract:{name:"",userName:"",data:"",info:""},rule:{name:{required:!0,message:"请输入合同名称",trigger:"blur"},userName:{required:!0,message:"请输入客户姓名",trigger:"blur"}}}},methods:{resetContract:function(){var t=this;this.$confirm("此操作将清空该合同，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.draftForm=t.cleanJson(t.draftForm),t.$notify({title:"成功",message:"清空成功！",type:"success"})}))},postContract:function(){var t=this;this.$refs["draftForm"].validate((function(e){e?t.$axios({url:t.$url+"/contract/addContract",method:"post",data:{name:t.draftForm.name,userName:t.draftForm.userName,dataFrom:t.draftForm.dataFrom,dataTo:t.draftForm.dataTo,info:t.draftForm.info},transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){console.log(t)})):t.$notify({title:"失败",message:"提交失败！",type:"error"})}))},cleanJson:function(t){for(var e in t)t[e]="";return t}}}),i=n,s=(a("a76e"),a("f3f3"),a("2877")),l=Object(s["a"])(i,o,r,!1,null,"6c70e2b6",null);e["default"]=l.exports},"7e30":function(t,e,a){},a76e:function(t,e,a){"use strict";var o=a("0940"),r=a.n(o);r.a},f3f3:function(t,e,a){"use strict";var o=a("7e30"),r=a.n(o);r.a}}]);
//# sourceMappingURL=chunk-3590052c.aa668a94.js.map