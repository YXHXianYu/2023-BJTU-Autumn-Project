(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e88f9"],{"8a93":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.filter((function(e){return!t.search||e.contract_name.toLowerCase().includes(t.search.toLowerCase())})),height:"500"}},[o("el-table-column",{attrs:{label:"序号",prop:"index"}}),o("el-table-column",{attrs:{label:"合同名称",prop:"contract_name"}}),o("el-table-column",{attrs:{label:"起草时间",prop:"start_time"}}),o("el-table-column",{attrs:{label:"结束时间",prop:"end_time"}}),o("el-table-column",{attrs:{label:"合同状态",prop:"state"}})],1)],1)},a=[],s=(o("a434"),o("b0c0"),o("159b"),{name:"allocContract",data:function(){var t=this,e=function(){var e=[];return t.$axios({url:t.$url+"/manager/checkContractState",method:"post",data:{types:1,token:t.$store.state.token,process:1},transformRequest:[function(t){var e="";for(var o in t)e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(o){o.data.contracts.forEach((function(o,n){t.message="待分配",0===o.state?t.message="待会签":1===o.state?t.message="待定稿":2===o.state?t.message="待审批":3===o.state?t.message="待签订":t.message="已完成",e.push({index:n+1,date:o.beginTime,contract_name:o.name,start_time:o.start_time,end_time:o.end_time,id:o.id,state:t.message})}))})),e};return{message:"",search:"",tableData:e(),dialogVisible:!1,dialog2Visible:!1,dialog3Visible:!1,dialog4Visible:!1,msg:"",index:-1,row:-1,resData:[],commitValue:[],watchValue:[],signValue:[],permissionData:[],counterData:[],signData:[],approveData:[]}},methods:{sendData:function(){var t,e,o;window.console.log("hhh"),t=[],e=[],o=[],t=this.commitValue,e=this.watchValue,o=this.signValue,window.console.log("commit: "+t),window.console.log("signuser: "+e),window.console.log("watchuser: "+o),0===t.length||0===e.length||0===o.length?this.$notify({title:"失败",message:"分配失败！",type:"failure"}):(this.$axios({url:this.$url+"/manager/display/distribute",method:"post",data:{types:1,token:this.$store.state.token,con_id:this.row.id,counter_names:t,approve_names:o,sign_names:e,contract_name:this.row.contract_name},transformRequest:[function(t){var e="";for(var o in t)e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}),this.tableData.splice(this.index,1),this.$notify({title:"成功",message:"分配成功！",type:"success"})),this.dialog2Visible=!1},closeDlg:function(){this.permissionData=[],this.commitValue=[],this.watchValue=[],this.signValue=[],this.dialog2Visible=!1,console.log(this.permissionData)},handleEdit:function(t,e){var o=this;this.index=t,this.row=e,this.dialog2Visible=!0;var n=function(){var t=[],e=[],n=[],a=[];return o.$axios({url:o.$url+"/manager/display/distribute",method:"post",data:{types:0,token:o.$store.state.token,con_id:o.row.id},transformRequest:[function(t){var e="";for(var o in t)e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){t.data.counters.forEach((function(t){a.push({label:t.name,key:t.id})})),t.data.approves.forEach((function(t){n.push({label:t.name,key:t.id})})),t.data.signs.forEach((function(t){e.push({label:t.name,key:t.id})}))})),console.log("0",e),console.log("1",a),console.log("2",n),o.signData=e,o.approveData=n,o.counterData=a,t};this.permissionData=n()},changeCommit:function(t,e,o){"right"===e&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:1,list:o},transformRequest:[function(t){var e="";for(var o in t)e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}),"left"===e&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:-1,list:o},transformRequest:[function(t){var e="";for(var o in t)e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},changeWatch:function(t,e,o){"right"===e&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:2,list:o},transformRequest:[function(t){var e="";for(var o in t)e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}),"left"===e&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:-2,list:o},transformRequest:[function(t){var e="";for(var o in t)e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},changeSign:function(t,e,o){"right"===e&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:4,list:o},transformRequest:[function(t){var e="";for(var o in t)e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}),"left"===e&&this.$axios({url:this.$url+"/contract/updatePermission",method:"post",data:{token:this.$store.state.token,con_id:this.row.id,type:-4,list:o},transformRequest:[function(t){var e="";for(var o in t)e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}),i=s,r=o("2877"),c=Object(r["a"])(i,n,a,!1,null,"5a1a0b9a",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0e88f9.2646f2ab.js.map